<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>HTML5: Web Storage Exercise 1</title>
<script type="text/javascript">
//write the checkStorageSupport() function here
function checkStorageSupport()
{
	if(window.localStorage)
	{
		alert("This browser supports local storage.");	
		window.addEventListener("storage", handleStorage, false);
	}
	else
	{
		alert("This browser does NOT support local storage");	
	}	
}
function handleStorage(evt)
{
	alert("you stored a value. Key=" + evt.key + " old value: " + evt.oldValue + " new value: " + evt.newValue + " at " + evt.storageArea);	
}

//write the saveLocal() function here
function saveLocal(){
    if (window.localStorage) 
	{
		var fName = document.getElementById("fName").value;
		var title = document.getElementById("title").value;
        var person = {"firstname":fName,"title":title};
        localStorage.setItem("person",JSON.stringify(person));
       
    } else {
        alert("Your Browser does not support LocalStorage.");
    }
}




//write the readLocal() function here 
function readLocal(){
    if (window.localStorage) 
	{
        //Get the person object
        var person = localStorage.getItem("person");
        person = JSON.parse(person);
        alert(person.firstname + " is a " + person.title + ".");
    }
}




</script>
</head>
<body onLoad="checkStorageSupport()">
<p>First Name: 
  <input type="text" name="fName" id="fName">
</p>
<p>Title: 
  <input type="text" name="title" id="title">
</p>
<div id="main">
  <input type="button" value="Save Values" onclick="saveLocal()"/>
  <input type="button" value="Read Values" onclick="readLocal()"/>
</div>
</body>
</html>